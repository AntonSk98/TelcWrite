<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="creation-date" content="{{creationDate}}">
  <title>{{filename}}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
  <style>
    :root {
      --accent: #6366f1;
      --accent-hover: #4f46e5;
    }

    body {
      background: #f8f9fc;
    }

    .btn-accent {
      background: var(--accent);
      border: none;
      color: white;
    }

    .btn-accent:hover {
      background: var(--accent-hover);
      color: white;
    }

    .bg-removed {
      background: #fee2e2;
      color: #dc2626;
      text-decoration: line-through;
    }

    .bg-added {
      background: #dcfce7;
      color: #16a34a;
      font-weight: 500;
    }

    .score-display {
      font-size: 4rem;
      line-height: 1;
      color: var(--accent);
    }

    .card-header .btn {
      border: none !important;
      box-shadow: none !important;
      outline: none !important;
    }

    .card-header .btn:focus,
    .card-header .btn:active,
    .card-header .btn.active {
      border: none !important;
      box-shadow: none !important;
      background: transparent !important;
    }

    .card-header .btn:hover .text-secondary {
      color: var(--accent) !important;
    }
  </style>
  <script src="/template/script.js"></script>
</head>

<body>
  <div class="container py-4 py-md-5" style="max-width: 968px;">

    <!-- Header -->
    <header class="d-flex align-items-center justify-content-between mb-4 pb-3 border-bottom">
      <div>
        <small class="text-secondary">{{creationDate}}</small>
        <h1 class="h3 fw-bold mb-0">{{filename}}</h1>
      </div>
      <a href="/" class="btn btn-light btn-sm d-flex align-items-center gap-1">
        <i class="bi bi-arrow-left"></i>
        <span class="d-none d-sm-inline">Zurück</span>
      </a>
    </header>

    <!-- Task Section -->
    <div class="card border-0 shadow-sm rounded-3 mb-3">
      <div class="card-header bg-transparent border-0 py-3">
        <button class="btn p-0 w-100 text-start d-flex justify-content-between align-items-center"
          data-bs-toggle="collapse" data-bs-target="#taskCollapse" aria-expanded="true">
          <span class="small text-uppercase text-secondary fw-semibold">TELC Aufgabe</span>
          <i class="bi bi-chevron-down text-secondary"></i>
        </button>
      </div>
      <div id="taskCollapse" class="collapse show">
        <div class="card-body pt-0">
          <textarea id="task-input" class="form-control bg-light border-0"
            placeholder="Fügen Sie hier die Aufgabenstellung ein (z.B. E-Mail an einen Freund schreiben)..." rows="6"></textarea>
        </div>
      </div>
    </div>

    <!-- Content Section -->
    <div class="card border-0 shadow-sm rounded-3 mb-3">
      <div class="card-header bg-transparent border-0 py-3">
        <button class="btn p-0 w-100 text-start d-flex justify-content-between align-items-center"
          data-bs-toggle="collapse" data-bs-target="#contentCollapse" aria-expanded="true">
          <span class="small text-uppercase text-secondary fw-semibold">Ihre Antwort</span>

          <i class="bi bi-chevron-down text-secondary"></i>
        </button>
      </div>
      <div id="contentCollapse" class="collapse show">
        <div class="card-body pt-0">
          <textarea id="content-input" class="form-control bg-light border-0" placeholder="Schreiben Sie hier Ihren Text (E-Mail, Brief, etc.)..."
            rows="10"></textarea>
          <small id="word-count" class="text-secondary fw-normal pt-2"></small>

        </div>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="text-center mb-4">
      <button id="submit-btn" class="btn btn-accent px-4 px-md-5 py-2" disabled>
        <i class="bi bi-send me-2"></i>Text korrigieren lassen
      </button>
    </div>

    <!-- Review Section -->
    <div id="review-section" class="card border-0 shadow-sm rounded-3" hidden>
      <div class="card-body p-3 p-md-4">

        <!-- Score -->
        <div class="text-center py-4 border-bottom mb-4">
          <div class="score-display fw-bold">
            <span id="review-score"></span><span class="fs-5 text-secondary fw-normal">/45</span>
          </div>
          <p class="text-secondary mb-0 mt-1">Bewertung</p>
        </div>

        <!-- Feedback -->
        <div class="mb-4">
          <label class="small text-uppercase text-secondary fw-semibold d-block mb-2">Rückmeldung</label>
          <div class="p-3 bg-light rounded-3">
            <p id="review-feedback" class="mb-0"></p>
          </div>
        </div>

        <!-- Correction -->
        <div>
          <label class="small text-uppercase text-secondary fw-semibold d-block mb-2">Korrigierter Text</label>
          <small class="text-secondary d-block mt-2 mb-1">
            <i class="bi bi-pencil me-1"></i>Klicken Sie auf den Text zum Bearbeiten
          </small>
          <div id="review-readonly-correction" class="p-3 bg-light rounded-3"
            style="cursor: pointer; min-height: 100px; line-height: 1.8;"></div>
          <textarea id="review-editable-correction" class="form-control bg-light border-0 mt-2" rows="10"
            hidden></textarea>
        </div>

      </div>
    </div>

  </div>
</body>

</html>