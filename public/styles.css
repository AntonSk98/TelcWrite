/* ============================================================
   Klar â€“ Custom Styles (mobile-first)
   Bootstrap CSS variable overrides + minimal custom rules.
   Everything else uses Bootstrap utility classes.
   ============================================================ */

/* --- Bootstrap overrides: Indigo brand color --- */
:root,
[data-bs-theme="light"] {
    --bs-primary:          #6366f1;
    --bs-primary-rgb:      99, 102, 241;
    --bs-link-color:       #6366f1;
    --bs-link-hover-color: #4f46e5;
    --bs-body-bg:          #f8f9fc;
}

/* --- Layout --- */
.container {
    max-width: 768px;
}

/* Safe-area padding for notched phones */
body {
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
}

/* Bottom clearance so content isn't hidden behind FABs */
.main-content {
    padding-bottom: 80px;
}

.logo {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, var(--bs-primary), #818cf8);
}

.btn-primary {
    --bs-btn-bg:           #6366f1;
    --bs-btn-border-color: #6366f1;
    --bs-btn-hover-bg:     #4f46e5;
    --bs-btn-hover-border-color: #4f46e5;
    --bs-btn-active-bg:    #4338ca;
    --bs-btn-active-border-color: #4338ca;
    --bs-btn-disabled-bg:  #6366f1;
    --bs-btn-disabled-border-color: #6366f1;
}

.pagination {
    --bs-pagination-color:        #6366f1;
    --bs-pagination-active-bg:    #6366f1;
    --bs-pagination-active-border-color: #6366f1;
    --bs-pagination-focus-box-shadow: none;
}

/* --- Document list --- */
.file-item {
    transition: background 0.15s;
}

.file-item:active {
    background: rgba(99, 102, 241, 0.06);
}

.file-item .btn-delete {
    opacity: 1;
    min-width: 36px;
    min-height: 36px;
}

.file-item .btn-delete:hover {
    color: #dc3545 !important;
    background: #fff5f5;
}

/* Desktop: reveal on hover */
@media (hover: hover) {
    .file-item .btn-delete {
        opacity: 0;
        transition: opacity 0.15s;
    }

    .file-item:hover .btn-delete {
        opacity: 1;
    }
}

/* --- Document icon --- */
.doc-icon {
    width: 36px;
    height: 36px;
    flex-shrink: 0;
    background: linear-gradient(135deg, #e0e7ff, #c7d2fe);
    color: var(--bs-primary);
}

/* --- HTMX loading indicator --- */
.htmx-indicator {
    opacity: 0;
    transition: opacity 200ms ease-in;
}

.htmx-request .htmx-indicator {
    opacity: 1;
}

/* --- Diff highlighting --- */
.bg-removed {
    background: #fee2e2;
    color: #dc2626;
    text-decoration: line-through;
}

.bg-added {
    background: #dcfce7;
    color: #16a34a;
    font-weight: 500;
}

/* --- Score display (mobile-first sizing) --- */
.score-display {
    font-size: 3rem;
    line-height: 1;
    color: var(--bs-primary);
}

@media (min-width: 576px) {
    .score-display {
        font-size: 4rem;
    }
}

/* --- Accordion header buttons --- */
.card-header .btn {
    border: none !important;
    box-shadow: none !important;
    outline: none !important;
}

.card-header .btn:focus,
.card-header .btn:active,
.card-header .btn.active {
    border: none !important;
    box-shadow: none !important;
    background: transparent !important;
}

.card-header .btn:hover .text-secondary {
    color: var(--bs-primary) !important;
}

/* --- Textarea auto-sizing (with fallback) --- */
textarea {
    field-sizing: content;
    min-height: 120px;
}

/* --- Floating action buttons --- */
.fab-container {
    z-index: 1000;
    padding-bottom: env(safe-area-inset-bottom);
}

.fab {
    width: 48px;
    height: 48px;
}

.fab-sm {
    width: 40px;
    height: 40px;
}

/* --- Global loading overlay --- */
.global-loader {
    position: fixed;
    inset: 0;
    z-index: 2000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(4px);
}

/* --- Toast safe area --- */
.toast-container {
    padding-top: env(safe-area-inset-top);
}

/* --- Create exercise form: wrap on small screens --- */
.create-form {
    display: flex;
    gap: 0.5rem;
}

.create-form input {
    min-width: 0;
}

.create-form .btn {
    flex-shrink: 0;
}
